<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head', { title }) %>
</head>
<body>
  <%- include('partials/navbar', { user }) %>
  <main class="container">
    <h1>Instructor Dashboard</h1>

    <!-- UC01/UC05: upload Excel -->
    <h2>Upload grades Excel</h2>
    <form action="/api/grades/upload" method="post" enctype="multipart/form-data">
      <input type="file" name="xlsx" accept=".xlsx" required />
      <button class="button" type="submit">Upload</button>
    </form>

    <!-- UC04: single manual edit -->
    <h2>Quick amend</h2>
    <form action="/api/grades/edit" method="post">
      <div class="form-group">
        <label>Course</label><input name="course" required />
      </div>
      <div class="form-group">
        <label>Student ID (FK)</label><input name="studentId" required />
      </div>
      <div class="form-group">
        <label>Grade</label><input name="grade" type="number" step="0.1" required />
      </div>
      <button class="button" type="submit">Save grade</button>
    </form>

    <!-- UC06 – publish -->
    <h2>Publish all provisional grades</h2>
    <button class="button"
            onclick="fetch('/api/grades/publish',{method:'PATCH'}).then(()=>flash('Published'))">
      Publish
    </button>

    <!-- UC07 – reply to review requests -->
    <h2>Open review requests</h2>
    <table>
      <thead><tr><th>#</th><th>Student</th><th>Course</th><th>Item</th><th>Current</th><th>Req.</th><th>Decision</th></tr></thead>
      <tbody id="appeals"><!-- rows rendered server‑side --></tbody>
    </table>
  </main>
  <script type="module" src="/script.js"></script>
</body>
</html>
